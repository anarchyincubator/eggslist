# Local development overrides.
# This file is auto-loaded by docker compose alongside docker-compose.yml.
# Do NOT commit environment-specific secrets here.

services:
  backend:
    volumes:
      - ./eggslist-backend:/home/app/web
    command: python manage.py runserver 0.0.0.0:8000

  frontend:
    build:
      context: ./eggslist-frontend
      target: builder
      args:
        BACKEND_URL: http://localhost:8000/api
    volumes:
      - ./eggslist-frontend:/app
      - frontend_node_modules:/app/node_modules
    environment:
      - BACKEND_URL=http://localhost:8000/api
      - NODE_OPTIONS=--openssl-legacy-provider
      - CHOKIDAR_USEPOLLING=true
    command: npm run dev

volumes:
  frontend_node_modules:
